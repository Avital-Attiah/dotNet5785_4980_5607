<Window x:Class="PL.Call.CallListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:local="clr-namespace:PL.Call"
        Title="ניהול קריאות"
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">

    <DockPanel Margin="10">
        <!-- ======================= -->
        <!-- DataGrid להצגת הקריאות -->
        <!-- ======================= -->
        <DataGrid x:Name="dgCalls"
                  ItemsSource="{Binding CallList}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  IsReadOnly="True"
                  MouseDoubleClick="dgCalls_MouseDoubleClick"
                  Margin="0,0,0,10"
                  RowHeight="30"
                  FontSize="14"
                  GridLinesVisibility="Horizontal"
                  HeadersVisibility="Column">
            <DataGrid.Columns>
                <!-- עמודת ת.ז. קריאה -->
                <DataGridTextColumn Header="ת.ז. קריאה"
                                    Binding="{Binding Id}"
                                    Width="80"/>

                <!-- עמודת סטטוס -->
                <DataGridTextColumn Header="סטטוס"
                                    Binding="{Binding Status}"
                                    Width="100"/>

                <!-- עמודת זמן שנותר לסיום -->
                <DataGridTextColumn Header="זמן שנותר (דק')"
                                    Binding="{Binding RemainingTime}"
                                    Width="120"/>

                <!-- עמודת שם מתנדב אחרון שטיפל -->
                <DataGridTextColumn Header="מתנדב אחרון"
                                    Binding="{Binding LastVolunteerName}"
                                    Width="150"/>

                <!-- עמודת סך הקצאות -->
                <DataGridTextColumn Header="מספר הקצאות"
                                    Binding="{Binding AssignmentsCount}"
                                    Width="120"/>

                <!-- עמודת כפתור מחיקה -->
                <DataGridTemplateColumn Header="מחיקה" Width="80">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="מחק"
                                    Width="60"
                                    Height="24"
                                    FontSize="12"
                                    Click="DeleteCall_Click"
                                    IsEnabled="{Binding CanBeDeleted}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- עמודת כפתור ביטול הקצאה -->
                <DataGridTemplateColumn Header="בטל הקצאה" Width="100">
                
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ======================= -->
        <!-- לחצני תחתית: הוספת קריאה + חזור -->
        <!-- ======================= -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0">
            <Button x:Name="btnAddCall"
                    Content="הוסף קריאה"
                    Width="100"
                    Height="30"
                    FontSize="14"
                    Margin="0,0,10,0"
                    Click="btnAddCall_Click"/>
            <Button x:Name="btnBack"
                    Content="חזור"
                    Width="80"
                    Height="30"
                    FontSize="14"
                    Click="btnBack_Click"/>
        </StackPanel>
    </DockPanel>
</Window>
